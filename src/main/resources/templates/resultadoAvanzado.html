<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Módulo Registrado - DocumentHub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="shortcut icon" href="/iconoSistemaDoc.ico" /> 
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen flex flex-col">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <!-- Logo con enlace al Dashboard -->
                <a th:href="@{/dashboard}" class="flex items-center">
                    <img th:src="@{/img/iconoSistemaDoc.png}" width="40px" alt="Logo DocumentHub" class="hover:opacity-80 transition-opacity">
                </a>
                <h1 class="text-xl font-semibold text-gray-800 hidden md:block">DocumentHub</h1>
            </div>

            <div class="flex items-center space-x-4">
                <!-- Botón Dashboard -->
                <a th:href="@{/dashboard}"
                    class="bg-gray-50 hover:bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium flex items-center transition">
                    <i class="fas fa-tachometer-alt mr-2"></i> Dashboard
                </a>

                <!-- Botón Cerrar Sesión (opcional) -->
                <div
                    class="bg-red-50 hover:bg-red-100 text-red-600 px-4 py-2 rounded-lg text-sm font-medium flex items-center transition">
                    <form th:action="@{/logout}" method="post">
                        <button type="submit"><i class="fas fa-sign-out-alt mr-2"></i> Cerrar sesión</button>
                    </form>
                </div>

            </div>
        </div>
    </header>

    <!-- Contenido principal -->
    <main class="flex-grow">
        <div class="container mx-auto px-4 py-8 max-w-5xl">
            <div class="bg-white rounded-xl shadow-md p-8">
                <!-- Encabezado con icono de éxito -->
                <div class="text-center mb-8">
                    <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4">
                        <i class="fas fa-check-circle text-green-600 text-2xl"></i>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-800 mb-2">Módulo Registrado Exitosamente</h1>
                    <p class="text-gray-600">Los detalles técnicos del módulo se han guardado correctamente.</p>
                </div>

                <!-- Información técnica del módulo -->
                <div class="border border-gray-200 rounded-lg divide-y divide-gray-200 mb-8">
                    <!-- Sección de información básica -->
                    <div class="px-6 py-4">
                        <h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center">
                            <i class="fas fa-info-circle text-blue-500 mr-2"></i> Información Técnica del Módulo
                        </h3>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <p class="text-sm font-medium text-gray-500">Elaborado por</p>
                                <p class="mt-1 text-sm text-gray-900" th:text="${modulo.personaElaboro}"></p>
                            </div>

                            <div>
                                <p class="text-sm font-medium text-gray-500">Desarrollador</p>
                                <p class="mt-1 text-sm text-gray-900" th:text="${modulo.desarrollador}"></p>
                            </div>

                            <div>
                                <p class="text-sm font-medium text-gray-500">Nombre del Módulo</p>
                                <p class="mt-1 text-sm text-gray-900" th:text="${modulo.nombreModulo}"></p>
                            </div>

                            <div>
                                <p class="text-sm font-medium text-gray-500">Ruta del Módulo</p>
                                <p class="mt-1 text-sm text-gray-900" th:text="${modulo.rutaModulo}"></p>
                            </div>

                            <div>
                                <p class="text-sm font-medium text-gray-500">Javascript</p>
                                <p class="mt-1 text-sm text-gray-900" th:text="${modulo.javascript}"></p>
                            </div>

                            <div>
                                <p class="text-sm font-medium text-gray-500">JSP</p>
                                <p class="mt-1 text-sm text-gray-900" th:text="${modulo.jsp}"></p>
                            </div>

                            <div>
                                <p class="text-sm font-medium text-gray-500">POJO</p>
                                <p class="mt-1 text-sm text-gray-900" th:text="${modulo.pojo}"></p>
                            </div>

                            <div>
                                <p class="text-sm font-medium text-gray-500">Servicio</p>
                                <p class="mt-1 text-sm text-gray-900" th:text="${modulo.servicio}"></p>
                            </div>

                            <div>
                                <p class="text-sm font-medium text-gray-500">Repositorio</p>
                                <p class="mt-1 text-sm text-gray-900" th:text="${modulo.repositorio}"></p>
                            </div>

                            <div>
                                <p class="text-sm font-medium text-gray-500">Clases que utiliza</p>
                                <p class="mt-1 text-sm text-gray-900" th:text="${modulo.clasesUtiliza}"></p>
                            </div>

                            <div>
                                <p class="text-sm font-medium text-gray-500">Controlador</p>
                                <p class="mt-1 text-sm text-gray-900" th:text="${modulo.controlador}"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Lista de APIs -->
                    <div class="px-6 py-4">
                        <h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center">
                            <i class="fas fa-plug text-blue-500 mr-2"></i> APIs Registradas
                        </h3>

                        <div th:each="api, iterStat : ${modulo.apis}" class="mb-6 last:mb-0">
                            <div class="bg-gray-50 border border-gray-200 rounded-lg p-6">
                                <div class="flex justify-between items-start mb-4">
                                    <h4 class="font-medium text-gray-800 flex items-center">
                                        <i class="fas fa-code-branch text-blue-500 mr-2"></i>
                                        <span th:text="${api.nombreApi}"></span>
                                    </h4>
                                    <span
                                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        <span th:text="${api.tipo}"></span>
                                    </span>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <p class="text-xs font-medium text-gray-500">Ruta</p>
                                        <p class="mt-1 text-sm text-gray-900 font-mono" th:text="${api.ruta}"></p>
                                    </div>

                                    <div>
                                        <p class="text-xs font-medium text-gray-500">Parámetros</p>
                                        <p class="mt-1 text-sm text-gray-900" th:text="${api.parametros ?: 'N/A'}"></p>
                                    </div>

                                    <div class="md:col-span-2">
                                        <p class="text-xs font-medium text-gray-500">Datos que regresa</p>
                                        <p class="mt-1 text-sm text-gray-900 font-mono"
                                            th:text="${api.datosRegresa ?: 'N/A'}"></p>
                                    </div>

                                    <div class="md:col-span-2">
                                        <p class="text-xs font-medium text-gray-500">Descripción</p>
                                        <p class="mt-1 text-sm text-gray-900" th:text="${api.descripcion ?: 'N/A'}"></p>
                                    </div>

                                    <div class="md:col-span-2" th:if="${api.comentarios}">
                                        <p class="text-xs font-medium text-gray-500">Comentarios</p>
                                        <p class="mt-1 text-sm text-gray-900" th:text="${api.comentarios}"></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Acciones -->
                <div class="flex flex-col sm:flex-row justify-between items-center gap-4 border-t border-gray-200 pt-6">
                    <form th:action="@{/generar-pdf}" th:object="${modulo}" method="post" class="w-full sm:w-auto">
                        <!-- Campos ocultos para el PDF -->
                        <input type="hidden" th:field="*{personaElaboro}">
                        <input type="hidden" th:field="*{desarrollador}">
                        <input type="hidden" th:field="*{nombreModulo}">
                        <input type="hidden" th:field="*{rutaModulo}">
                        <input type="hidden" th:field="*{javascript}">
                        <input type="hidden" th:field="*{jsp}">
                        <input type="hidden" th:field="*{pojo}">
                        <input type="hidden" th:field="*{servicio}">
                        <input type="hidden" th:field="*{repositorio}">
                        <input type="hidden" th:field="*{clasesUtiliza}">
                        <input type="hidden" th:field="*{controlador}">
                        <div th:each="api, iterStat : *{apis}">
                            <input type="hidden" th:field="*{apis[__${iterStat.index}__].nombreApi}">
                            <input type="hidden" th:field="*{apis[__${iterStat.index}__].tipo}">
                            <input type="hidden" th:field="*{apis[__${iterStat.index}__].ruta}">
                            <input type="hidden" th:field="*{apis[__${iterStat.index}__].datosRegresa}">
                            <input type="hidden" th:field="*{apis[__${iterStat.index}__].parametros}">
                            <input type="hidden" th:field="*{apis[__${iterStat.index}__].descripcion}">
                            <input type="hidden" th:field="*{apis[__${iterStat.index}__].comentarios}">
                        </div>

                        <button type="submit"
                            class="w-full sm:w-auto inline-flex items-center justify-center px-6 py-2 border border-transparent rounded-lg text-white bg-red-600 hover:bg-red-700 transition">
                            <i class="fas fa-file-pdf mr-2"></i> Generar PDF
                        </button>
                    </form>
                    

                    <div class="flex flex-col sm:flex-row gap-4 w-full sm:w-auto">
                        <a th:href="@{/formulario-modulo-avanzado}"
                            class="inline-flex items-center justify-center px-6 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition">
                            <i class="fas fa-plus mr-2"></i> Registrar otro módulo
                        </a>
                        <!-- Botón Regresar -->
                        <!-- <a th:href="@{/formulario-modulo-avanzado}"
                            class="bg-blue-50 hover:bg-blue-100 text-blue-600 px-4 py-2 rounded-lg text-sm font-medium flex items-center transition">
                            <i class="fas fa-arrow-left mr-2"></i> Editar
                        </a> -->
                        <!-- Corroborar que sea el objeto que la pagina recibe -->
                        <form th:action="@{/editar}" th:object="${modulo}" method="post">
                            <input type="hidden" th:field="*{personaElaboro}">
                            <input type="hidden" th:field="*{desarrollador}">
                            <input type="hidden" th:field="*{nombreModulo}">
                            <input type="hidden" th:field="*{rutaModulo}">
                            <input type="hidden" th:field="*{javascript}">
                            <input type="hidden" th:field="*{jsp}">
                            <input type="hidden" th:field="*{pojo}">
                            <input type="hidden" th:field="*{servicio}">
                            <input type="hidden" th:field="*{repositorio}">
                            <input type="hidden" th:field="*{clasesUtiliza}">
                            <input type="hidden" th:field="*{controlador}">
                            <div th:each="api, iterStat : *{apis}">
                                <input type="hidden" th:field="*{apis[__${iterStat.index}__].nombreApi}">
                                <input type="hidden" th:field="*{apis[__${iterStat.index}__].tipo}">
                                <input type="hidden" th:field="*{apis[__${iterStat.index}__].ruta}">
                                <input type="hidden" th:field="*{apis[__${iterStat.index}__].datosRegresa}">
                                <input type="hidden" th:field="*{apis[__${iterStat.index}__].parametros}">
                                <input type="hidden" th:field="*{apis[__${iterStat.index}__].descripcion}">
                                <input type="hidden" th:field="*{apis[__${iterStat.index}__].comentarios}">
                            </div>
                            <button type="submit" class="inline-flex items-center justify-center px-6 py-2 border border-transparent rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition">
                                <i class="fas fa-pen-alt mr-2"></i> Editar
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 py-4">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-center items-center">
                <div class="mb-4 md:mb-0">
                    <p class="text-sm text-gray-600">© 2025 DocumentHub. Todos los derechos reservados.</p>
                </div>
            </div>
        </div>
    </footer>
</body>

</html>

<!-- <!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Resultado</title>
    <style>
        .api-result {
            border: 1px solid #eee;
            padding: 15px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Módulo Registrado</h1>
    
     Mostrar datos básicos del módulo 
    <p th:text="${modulo.personaElaboro}"></p>
    <h2>APIs registradas:</h2>
    <p th:text="${modulo.desarrollador}"></p>
    <p th:text="${modulo.clasesUtiliza}"></p>
    <div th:each="api : ${modulo.apis}" class="api-result">
        <h3 th:text="${api.nombreApi}"></h3>
        <p><strong>Tipo:</strong> <span th:text="${api.tipo}"></span></p>
        <p><strong>Ruta:</strong> <span th:text="${api.ruta}"></span></p>
        <p><strong>Datos que regresa:</strong> <span th:text="${api.datosRegresa}"></span></p>
        <p><strong>Parámetros:</strong> <span th:text="${api.parametros}"></span></p>
        <p><strong>Descripción:</strong> <span th:text="${api.descripcion}"></span></p>
        <p><strong>Comentarios:</strong> <span th:text="${api.comentarios}"></span></p>
    </div>
    
    <a th:href="@{/formulario-modulo-avanzado}">Regresar</a>

    <form th:action="@{/generar-pdf}" th:object="${modulo}" method="post">
        <input type="hidden" th:field="*{personaElaboro}">
        <input type="hidden" th:field="*{desarrollador}">
        <input type="hidden" th:field="*{nombreModulo}">
        <input type="hidden" th:field="*{rutaModulo}">
        <input type="hidden" th:field="*{javascript}">
        <input type="hidden" th:field="*{jsp}">
        <input type="hidden" th:field="*{pojo}">
        <input type="hidden" th:field="*{servicio}">
        <input type="hidden" th:field="*{repositorio}">
        <input type="hidden" th:field="*{clasesUtiliza}">
        <input type="hidden" th:field="*{controlador}">
        <div th:each="api, iterStat : *{apis}">
            <input type="hidden" th:field="*{apis[__${iterStat.index}__].nombreApi}">
            <input type="hidden" th:field="*{apis[__${iterStat.index}__].tipo}">
            <input type="hidden" th:field="*{apis[__${iterStat.index}__].ruta}">
            <input type="hidden" th:field="*{apis[__${iterStat.index}__].datosRegresa}">
            <input type="hidden" th:field="*{apis[__${iterStat.index}__].parametros}">
            <input type="hidden" th:field="*{apis[__${iterStat.index}__].descripcion}">
            <input type="hidden" th:field="*{apis[__${iterStat.index}__].comentarios}">
        </div>

        <button type="submit">Crear PDF</button>
    </form>
</body>
</html> -->